<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="renderer" content="webkit"> 
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width"/>
<title>业务员佣金审核表</title>
 <link href="../css/bootstrap.min.css" rel="stylesheet"> 
 
 <style>
   .baseInfo, .detailInfo{
     font-weight: bold;
     font-size:16px;
   }
   .baseInfo span{
      padding-right:40px;
   }
   .detailInfo{
    line-height:35px;
   }
   .container{
     min-width:1000px;
     max-width:80%;
   }
   .detailInfo input{
    border:0;
    border-bottom: 1px solid #aaa;
    line-height:25px;
    width:120px;
    background-color: #fff;
    text-align:center;
   }
   
 </style>
 
 
 
</head>

<body>
     <div class="container">
         <center>  <h3 style="font-weight: bold;">xxx项目请佣明细</h3>   </center> 
        <div class="baseInfo">
        <span>姓名：xxx</span>
        <span>手机：159********</span>    
        <span>员工号：********************************</span>
        </div>
        <table class="table table-bordered table-hover" id="tableItem">
        <thead>
             <tr>
              <th>合同编号</th>
              <th>职位</th>
              <th>楼号</th>
              <th>单元号</th>
              <th>室号</th>
              <th>面积</th>
              <th>...</th>
              <th>成交日期</th>
              <th class="total">成交总金额</th>
              <th class="commission">佣金提成</th>
              <th class="grade">等级系数</th>
              <th class="ratio">请佣比</th>
              <th class="should">应发</th>
              <th class="deduct">其他款项</th>
              <th class="real">实发</th>
              <th>状态</th>
           </tr>
         </thead>    
             <tbody>
              <tr>
              <td>001</td>
              <td>普通职员</td>
              <td>5</td>
              <td>2</td>
              <td>1101</td>
              <td>110㎡</td>
              <td>...</td>
              <td>2016-12-01</td>
              <td>200万元</td>
              <td>3‰</td>
              <td>0.05600</td>
              <td>0.60</td>
              <td>67560元</td>
              <td>100</td>
              <td>67660元</td>
              <td><a href="javascript:void(0);" onclick="alert('审核处理流程')" >未审核</a></td>
             </tr>
              <tr>
              <td>002</td>
              <td>普通职员</td>
              <td>5</td>
              <td>3</td>
              <td>1101</td>
              <td>110㎡</td>
              <td>...</td>
              <td>2016-12-01</td>
              <td>200万元</td>
              <td>3‰</td>
              <td>0.05600</td>
              <td>0.60</td>
              <td>67560元</td>
              <td>-500</td>
              <td>67060元</td>
              <td><a href="javascript:void(0);" onclick="alert('审核处理流程')" >未审核</a></td>
             </tr>

             </tbody>
         </table>
         <div class="row"  style="color:red;">
           <div class="col-xs-10">应发：成交总金额*(佣金提成+等级系数)*请佣比
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   实发：应发-扣款</div>
           <div class="col-xs-2" style="text-align:right;">小计：<span class="sum">134720</span>元</div>
         </div>
         
          <br/>
    
          <div class="detailInfo">
          
<!--         &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
             <input type="text" value="xxxx" disabled="disabled" style="width:300px;"/>项目 
             <input type="text" value="xxxx" disabled="disabled"/>员工 ，
                                      在<input type="text" value="xxxx" disabled="disabled"/>批次请佣中，
                                      经核准本批次共获得业务提成总佣金 <input type="text" value="12000" disabled="disabled"/>元   ，
                                      扣除项目经理提成<input type="text" value="2100" disabled="disabled"/>元    ，
                                      扣除项目总监提成<input type="text" value="1500" disabled="disabled"/>元，
                                      小计个人获得 <input type="text" value="8400" disabled="disabled"/>元。
                                      扣除项目公共开支 <input type="text" value="2000" disabled="disabled"/>元;
                                      扣除业务过失处罚金   <input type="text"/>;
                                      扣除其他费用<input type="text"/>;
                                      扣除个人所得税  <input type="text"/>。
                                       应发  <input type="text"/>，
                                       实际需发<input type="text"/>。 -->
                                       
                                       
<!--            <div style="text-align:right; padding-top:100px;">
              <p>审核人： <input type="text"/> </p>
              <p>审核时间： <input type="text"/></p>
              <p>博思堂地产综合服务股份有限公司</p>
          </div> -->
          </div>    
     </div>
</body>

<script src="../js/jquery-1.10.1.min.js"></script>
<script src="../js/bootstrap.min.js"></script>

<script type="text/javascript">
   var sum=0;
   var totalIndex=$("#tableItem").find(".total").index();
   var commissionIndex=$("#tableItem").find(".commission").index();
   var gradeIndex=$("#tableItem").find(".grade").index();
   var ratioIndex=$("#tableItem").find(".ratio").index();
   var shouldIndex=$("#tableItem").find(".should").index();
   var deductIndex=$("#tableItem").find(".deduct").index();
   var realIndex=$("#tableItem").find(".real").index();
   
   //should=total*(grade+commission)
  $("#tableItem tbody tr").each(function(k){
	  var tdObj=$(this).find("td");
	 var total=tdObj.eq(totalIndex).text();
	 var commission=tdObj.eq(commissionIndex).text();
	 var grade=tdObj.eq(gradeIndex).text()*1;
	 var should=tdObj.eq(shouldIndex).text();
	 var real=tdObj.eq(realIndex).text();
	 var ratio=tdObj.eq(ratioIndex).text()*1;
	 var deduct=tdObj.eq(deductIndex).text()*1;
	 
	 total=total.replace("万元","")*10000;
	 real=real.replace("元","")*1;
	 should=should.replace("元","")*1;
	 commission=commission.replace("‰","")*1/10000;
	 
	 var shouldTest=total*(grade+commission)*ratio;
	 var realTest=shouldTest+deduct;
	 
	 if(shouldTest!=should){
		 tdObj.eq(shouldIndex).css('background','yellow');	 
	 }
	 
	 if(realTest!=real){
		 tdObj.eq(realIndex).css('background','yellow');	 
	 }
	 sum+=real;
  })
  var sumTxt=$(".sum").text();
   if(sumTxt!=sum){
	   $(".sum").css('background','yellow');	 
   }


</script>



</html>